"use strict";function clearTime(){$(".curLen3").css("-webkot-transform","rotate(0deg)").css("transform","rotate(0deg)"),$(".curLen4").css("-webkot-transform","rotate(0deg)").css("transform","rotate(0deg)"),$(".curLen5").css("-webkot-transform","rotate(0deg)").css("transform","rotate(0deg)")}function currentTime(){var a=document.getElementById("playMusic");if(a.ended)clearInterval(musicPosition),clearTime();else{var b=a.currentTime/a.duration*360;$(".determinate").css("width",a.currentTime/a.duration*100+"%"),b<180?$(".curLen3").css("-webkot-transform","rotate("+b+"deg)").css("transform","rotate("+b+"deg)"):(b-=180,$(".curLen3").css("-webkot-transform","rotate(180deg)").css("transform","rotate(180deg)"),$(".curLen4").css("-webkot-transform","rotate(180deg)").css("transform","rotate(180deg)"),$(".curLen5").css("-webkot-transform","rotate("+b+"deg)").css("transform","rotate("+b+"deg)"))}}var app=angular.module("myApp",[]),musicPosition=null,songFile=null;$(".modal-trigger").leanModal(),$(".button-collapse").sideNav(),app.controller("musicCtrl",["$scope",function(a){a.app={name:"App name",version:"1.0"},$("#file").change(function(){var b=this.files[0],c=b.urn||b.name;ID3.loadTags(c,function(){a.showTags(c)},{tags:["artist","title","album","year","track","genre","lyrics","picture"],dataReader:ID3.FileAPIReader(b)})}),a.play=!1,a.songVol=10,a.song={},a.audioActions=function(){a.play?(document.getElementById("playMusic").play(),musicPosition=setInterval(function(){currentTime()},1e3)):(document.getElementById("playMusic").pause(),clearInterval(musicPosition))},a.changeVol=function(b){var c=0;a.songVol=parseInt(a.songVol,10),a.songVol>0&&a.songVol<10?("up"===b?a.songVol+=1:"down"===b&&(a.songVol-=1),c=a.songVol/10):0==a.songVol?"up"===b?(a.songVol+=1,c=a.songVol/10):void 0===b&&(c=0):a.songVol&&("down"===b?a.songVol>0&&(a.songVol-=1,c=a.songVol/10):c=1),document.getElementById("playMusic").volume=c},a.showTags=function(b){a.play=!1;var c=ID3.getAllTags(b);a.song.title=c.title?c.title:"",a.song.artist=c.artist?c.artist:"",a.song.album=c.album?c.album:"",a.song.year=c.year?c.year:"",a.song.track=c.track?c.track:"",a.song.genre=c.genre?c.genre:"",a.song.lyrics=c.lyrics?c.lyrics.U:"";var d=c.picture;if(document.getElementById("coverShow").setAttribute("src",""),d){for(var e="",f=0;f<d.data.length;f++)e+=String.fromCharCode(d.data[f]);var g="data:"+d.format+";base64,"+window.btoa(e);document.getElementById("coverShow").setAttribute("src",g)}setTimeout(function(){Materialize.updateTextFields()},50),a.$apply()},a.save=function(b,c){var d=new ID3Writer(b.result);d.setFrame("TIT2",a.song.title).setFrame("TPE1",a.song.artist.split(",")).setFrame("TALB",a.song.album).setFrame("TYER",a.song.year).setFrame("TRCK",a.song.track).setFrame("TCON",a.song.genre.split(",")).setFrame("USLT",a.song.lyrics),c&&d.setFrame("APIC",c.result),d.addTag(),saveAs(d.getBlob(),songFile+"_tag.mp3")},a.write=function(){var b=new FileReader;b.onload=function(){if(document.getElementById("cover").files.length>0){var c=new FileReader;c.onload=function(){a.save(b,c)},c.onerror=function(){console.log("Cover Reader error",c.error)},c.readAsArrayBuffer(document.getElementById("cover").files[0])}else a.save(b)},b.onerror=function(){console.error("Song Reader error",b.error)},b.readAsArrayBuffer(document.getElementById("file").files[0])}}]),$("#cover").change(function(){if(this.files&&this.files[0]){var a=new FileReader;a.onload=function(a){document.getElementById("coverShow").setAttribute("src",a.target.result)},a.readAsDataURL(this.files[0])}}),$("#file").change(function(){if(this.files.length){var a=new FileReader,b=this.files[0];a.onload=function(a){$("#noFile").hide(),$("#fileOpen").show(),$("#hasFile").show(),clearTime(),document.getElementById("playMusic").pause(),songFile=b.name.split(".")[0],$("#playMusic").prop("src",a.target.result)},a.onerror=function(){console.error("Song Reader Play error",a.error)},a.readAsDataURL(b)}});
//# sourceMappingURL=ngapp.js.map